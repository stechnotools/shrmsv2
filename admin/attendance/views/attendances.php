<div class="row">	<div class="col-lg-12">		<div class="card">			<div class="card-header">				<h3 class="card-title float-left"><?php echo $heading_title; ?></h3>								<div class="panel-tools float-right">					<?php echo form_open_multipart('admin/attendance/uploadall','class="upload-form"');?>					<input type="file" name="battendance" id="battendance" style="display:none">										<div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">						<div class="">							<?php echo form_dropdown('branch_id', option_array_value($branches, 'id', 'name',array("-1"=>'All Branch')), set_value('branch_id', ''),"id='branch_id' class='form-control select2'"); ?>						</div>												<div class="input-group">							<input type="text" class="form-control monthpicker" id="month" name="month" value="<?=$month?>" placeholder="Month/Year" aria-label="Recipient's username" aria-describedby="basic-addon2">							<div class="input-group-append">								<button type="button" data-toggle="tooltip" title="Upload Bulk Attendance" class="btn btn-info" onclick="thisFileUpload();">Bulk Attendance Upload</i></button>							</div>						</div>						<a href="#" data-toggle="tooltip" class="btn btn-primary sdownload">Download Sample</a>												<!--<a href="<?php echo $add; ?>" data-toggle="tooltip" title="<?php echo $button_add; ?>" class="btn btn-primary"><i class="fa fa-plus"></i></a>-->						<!--<button type="button" data-toggle="tooltip" title="<?php echo $button_delete; ?>" class="btn btn-danger" onclick="confirm('<?php echo $text_confirm; ?>') ? $('#form-attendance').submit() : false;"><i class="fa fa-trash-o"></i></button>-->					</div>					<?php echo form_close(); ?>				</div>			</div>			<div class="card-body">				<div class="progress">				  <div class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"><div class="percent">0%</div></div>				</div>				<form id="form-filter" class="form-horizontal">					<div class="form-layout">						<div class="row">							<div class="col-lg-3">								<div class="form-group mg-b-10-force">									<label class="form-control-label">Branch: <span class="tx-danger">*</span></label>									<?php echo form_dropdown('fbranch', option_array_value($branches, 'id', 'name'), set_value('fbranch', ''),"id='fbranch' class='form-control select2'"); ?>									</div>							</div>														<div class="col-lg-3">								<div class="form-group mg-b-10-force">									<label class="form-control-label">Department: <span class="tx-danger">*</span></label>									<?php echo form_dropdown('department_id', option_array_value($departments, 'id', 'name',array(''=>'Select Department')), set_value('department_id', ''),"id='fdepartment' class='form-control select2'"); ?>									</div>							</div><!-- col-4 -->							<div class="col-lg-3">								<div class="form-group mg-b-10-force">									<label class="form-control-label">Designation: <span class="tx-danger">*</span></label>									<?php echo form_dropdown('designation_id', option_array_value($designations, 'id', 'name',array(''=>'Select Designation')), set_value('designation_id', ''),"id='fdesignation' class='form-control select2'"); ?>								</div>							</div><!-- col-4 -->							<div class="col-lg-3">								<div class="form-group mg-b-10-force">									<label class="form-control-label">Month: <span class="tx-danger">*</span></label>									<input type="text" class="form-control monthpicker" id="fmonth" name="fmonth" value="<?=$month?>" placeholder="Month/Year" aria-label="Recipient's username" aria-describedby="basic-addon2">								</div>							</div>							<div class="col-lg-3">								<label class="form-control-label">&nbsp;</label>								<div class="form-layout-footer">									<button type="button" id="btn-filter" class="btn btn-primary">Filter</button>									<button type="button" id="btn-reset" class="btn btn-default">Reset</button>								</div>							</div>						</div>																			<!-- form-layout-footer -->					</div><!-- form-layout -->				</form>								<hr/>				<form action="<?php echo $delete; ?>" method="post" enctype="multipart/form-data" id="form-attendance">          					<div class="row">						<div class="col-md-12 col-sm-12 col-12">							<table id="attendance_list" class="table table-striped table-bordered dt-responsive nowrap" style="border-collapse: collapse; border-spacing: 0; width: 100%;">								<thead>									<tr>										<th style="width: 1px;" class="text-center no-sort"><input type="checkbox" onclick="$('input[name*=\'selected\']').prop('checked', this.checked);" /></th>										<th>Employee Name</th>										<th>Card No</th>										<th>Total Days</th>										<th>Absent Days</th>										<th>Status</th>																				<th class="text-right no-sort">Actions</th>									</tr>								</thead>							</table>						</div>					</div>				</form>			</div>		</div>	</div></div><?php js_start(); ?><script type="text/javascript"><!--$(function(){	table=$('#attendance_list').DataTable({		"processing": true,		"serverSide": true,		"columnDefs": [			{ targets: 'no-sort', orderable: false }		],		stateSave: true,		//		stateSaveParams: function( settings, data ) {			data.branch_id = $('#fbranch').val();			data.department_id = $('#fdepartment').val();			data.month = $('#fmonth').val();			data.designation_id = $('#fdesignation').val();		},		stateLoadParams: function( settings, data ) {					  $('#fbranch').val(data.branch_id)		  $('#fdepartment').val(data.department_id)		  $('#fmonth').val(data.month)		  $('#fdesignation').val(data.designation_id)		},		/*"bStateSave": true,        /*"fnStateSave": function (oSettings, oData) {            localStorage.setItem( 'DataTables', JSON.stringify(oData) );        },        "fnStateLoad": function (oSettings) {            return JSON.parse( localStorage.getItem('DataTables') );        },*/		"ajax":{			url :"<?=$datatable_url?>", // json datasource			type: "post",  // method  , by default get			data: function ( data ) {				data.branch_id = $('#fbranch').val();				data.department_id = $('#fdepartment').val();				data.month = $('#fmonth').val();				data.designation_id = $('#fdesignation').val();			},			beforeSend: function(){				$('.alert-dismissible, .text-danger').remove();				$("#attendance_list_wrapper").LoadingOverlay("show");			},			complete: function(){				$("#attendance_list_wrapper").LoadingOverlay("hide");			},			error: function(){  // error handling				$(".attendance_list_error").html("");				$("#attendance_list").append('<tbody class="attendance_list_error"><tr><th colspan="3">No data found.</th></tr></tbody>');				$("#attendance_list_processing").css("display","none");							},			dataType:'json'		},	});		$('#btn-filter').click(function(){ //button filter event click		table.ajax.reload();  //just reload table	});	$('#btn-reset').click(function(){ //button reset event click		$('#form-filter')[0].reset();		table.ajax.reload();  //just reload table	});		var bar = $('.progress-bar');    var percent = $('.percent');    		$('.upload-form').ajaxForm({		dataType:'json',        beforeSend: function() {            var percentVal = '0%';            bar.width(percentVal);            percent.html(percentVal);        },        uploadProgress: function(event, position, total, percentComplete) {            var percentVal = percentComplete + '%';            bar.width(percentVal);            percent.html(percentVal);        },        complete: function(xhr) {            //console.log(xhr);			//location=xhr.redirect;        },		success: function(data){			console.log(data);			if(data.success){				location=data.redirect;			}					}    });		$('#battendance').on('change',function () {		$('.upload-form').submit();	})		$(".sdownload").click(function(e){		e.preventDefault();		//salert("ok");		branch_id=$("#branch_id").val();		month=$("#month").val();		if(branch_id!=0){			location=ADMIN_URL + 'attendance/downloadall?branch_id='+branch_id+'&month='+month;		}else{			$('.card').prepend('<div class="alert alert-danger alert-dismissible"><i class="fa fa-exclamation-circle"></i> Please selct Branch <button type="button" class="close" data-dismiss="alert">&times;</button></div>');		}	})	});function thisFileUpload() {	document.getElementById("battendance").click();};//--></script><?php js_end(); ?>